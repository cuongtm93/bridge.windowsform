Bridge.assembly("eSMS",function(){"use strict";Bridge.define("Kernel.Ajax",{fields:{success:null,request:null,error:null,Url:null,data:null,Async:!1,Method:null,_isValidRequest:!1},ctors:{init:function(){this._isValidRequest=!0},ctor:function(){this.$initialize();this.SetDefaultParameters()}},methods:{SetDefaultParameters:function(){this.Async=!0;this.Method="GET"},Request:function(){this.ValidateRequest();this.PrepareAjaxOptions();this._isValidRequest&&(this.request=jQuery.ajax({data:this.data,async:this.Async,method:this.Method,url:this.Url,success:this.success,error:this.error}))},ValidateRequest:function(){this._isValidRequest=!System.String.isNullOrWhiteSpace(this.Url);this._isValidRequest||this.ShowMessageForNotValidRequest()},ShowMessageForNotValidRequest:function(){alert("Request không hợp lệ");var ajaxRequestParams={Url:this.Url,data:this.data,Method:this.Method,Async:this.Async};System.Console.WriteLine("Request không hợp lệ : ");System.Console.WriteLine(ajaxRequestParams)},ShowNotSupportMethod:function(){System.Console.WriteLine("Hiện tại thư viện chưa hỗ trợ phương thức này")},PrepareAjaxOptions:function(){var $t;this.data==null&&(this.data={});do{if($t=Bridge.Reflection.getTypeName(Bridge.getType(this.data)),Bridge.referenceEquals($t,"String")){this.Url=System.String.concat(this.Url,this.data);this.data={};break}if(Bridge.referenceEquals($t,"Object")&&Bridge.referenceEquals(this.Method,"GET")){this.data=jQuery.param(this.data);break}if(Bridge.referenceEquals($t,"Object")&&Bridge.referenceEquals(this.Method,"POST"))break;this.data=jQuery.param(this.data.toJSON());break}while(0)}}});Bridge.define("Bridge.Razor.Generated.ViewRegistration");Bridge.define("console");Bridge.define("Esms.App",{statics:{ctors:{init:function(){Bridge.ready(this.Main)}},methods:{Main:function(){document.getElementById("targetbtn").onclick=Esms.App.Targetbtn_clickAsync},Targetbtn_clickAsync:function(){var $step=0,$task1,$taskResult1,$task2,$taskResult2,GetTest,$t,Test1,PostTest,Test2,$asyncBody=Bridge.fn.bind(this,function(){for(;;){$step=System.Array.min([0,1,2],$step);switch($step){case 0:GetTest=($t=new Kernel.AjaxTask,$t.Url="http://localhost:52084/home/TestGet",$t.Method="GET",$t.data={},$t);$task1=GetTest.Execute();$step=1;$task1.continueWith($asyncBody,!0);return;case 1:$taskResult1=$task1.getAwaitedResult();Test1=$taskResult1;GetTest.requestError||(document.getElementById("targetbtn").innerHTML=System.String.concat(document.getElementById("targetbtn").innerHTML,"get"+Test1.id));PostTest=($t=new Kernel.AjaxTask,$t.Url="http://localhost:52084/home/TestPost",$t.Method="POST",$t.data={},$t);$task2=PostTest.Execute();$step=2;$task2.continueWith($asyncBody,!0);return;case 2:$taskResult2=$task2.getAwaitedResult();Test2=$taskResult2;PostTest.requestError||(document.getElementById("targetbtn").innerHTML=System.String.concat(document.getElementById("targetbtn").innerHTML,"post "+Test2.id));return;default:return}}},arguments);$asyncBody()}}},$entryPoint:!0});Bridge.define("Javascript");Bridge.define("JSON");Bridge.define("Kernel.Attributes.TestedAttribute",{inherits:[System.Attribute],ctors:{ctor:function(msg){msg===void 0&&(msg="");this.$initialize();System.Attribute.ctor.call(this);System.String.isNullOrWhiteSpace(msg)||System.Console.WriteLine(msg)}}});Bridge.define("Kernel.Browser.Data",{methods:{getValueById:function(T,indentifer){return jQuery(Kernel.SelectorExtensions.Id(indentifer)).val()},getElementById:function(T,indentifer){return Bridge.cast(jQuery(Kernel.SelectorExtensions.Id(indentifer)).first()[0],T)},setValue:function(indentifer,value){jQuery(indentifer).val(value)},getKendoGrid:function(indentifer){return jQuery(Kernel.SelectorExtensions.Id(indentifer)).data("kendoGrid")},kendGridReloadData:function(grid){grid.dataSource.read()},select:function(jquerySelector){return jQuery(jquerySelector)}}});Bridge.define("Kernel.Class");Bridge.define("Kernel.KendoDatePicker",{fields:{kendo:null,jquery:null,_kendoDatePickerId:null,datePicker:null},props:{"this":{get:function(){return new Kernel.KendoDatePicker(this._kendoDatePickerId)}},object:{get:function(){return document.getElementById(Kernel.SelectorExtensions.Id(this._kendoDatePickerId))}}},ctors:{init:function(){this.kendo=kendo;this.jquery=jQuery},ctor:function(Id){this.$initialize();this._kendoDatePickerId=Id;this.datePicker=this.jquery(Kernel.SelectorExtensions.Id(this._kendoDatePickerId)).data("kendoDatePicker");this.jquery(Kernel.SelectorExtensions.Id(this._kendoDatePickerId)).kendoDatePicker()}},methods:{GetDateTime:function(){return this.datePicker.value()},SetDateTime:function(dateTime){try{var kendoTime=this.kendo.toString(this.kendo.parseDate(dateTime),"MM/dd/yyyy");this.datePicker.value(kendoTime)}catch(err){err=System.Exception.create(err);System.Console.WriteLine(System.String.format("Error :{0}",[err.Message]))}},SetToday:function(){var datePicker=new Kernel.KendoDatePicker(this._kendoDatePickerId);datePicker.SetDateTime(System.DateTime.getNow())},getFullWidth:function(){this["this"];this.this.object},ReadOnly:function(){this.jquery(Kernel.SelectorExtensions.Id(this._kendoDatePickerId)).attr("readonly",!0)}}});Bridge.define("Kernel.Others.IVoid",{$kind:"interface"});Bridge.define("Kernel.Http.HttpMethod");Bridge.define("Kernel.Others.IFunction",{$kind:"interface"});Bridge.define("Kernel.SelectorExtensions",{statics:{methods:{Id:function(name){return"#"+(name||"")},Class:function(name){return"#"+(name||"")},Tag:function(name){return name}}}});Bridge.define("localStorage");Bridge.define("Model.Common.Identifier",{fields:{Id:0}});Bridge.define("Model.View.StaffManagerModelView",{fields:{Email:null,Name:null,Position:null,Skype:null,ChiefName:null}});Bridge.define("Modules.StaffManager.Functions.Consts",{statics:{fields:{dialogActionEdit:null,dialogActionAdd:null},ctors:{init:function(){this.dialogActionEdit="Cập nhật";this.dialogActionAdd="Thêm"}}}});Bridge.define("support",{statics:{methods:{clearInnerHtml:function(element){element.innerHTML=""},plusText:function(element,text){var $t,textSpan;element.isConnected||alert("Không thể thực hiện hành động này");textSpan=($t=document.createElement("span"),$t.innerText=text,$t);element.insertAdjacentElement("afterend",textSpan)}}}});Bridge.define("WebExample.User",{fields:{Id:0,Name:null}});Bridge.define("Ajax.Admin.GetStaffById",{inherits:[Kernel.Ajax],ctors:{ctor:function(){this.$initialize();Kernel.Ajax.ctor.call(this);this.Url="/Admin/GetStaffById";this.Method="GET"}}});Bridge.define("Ajax.Admin.SetKeywordForSearch",{inherits:[Kernel.Ajax],ctors:{ctor:function(){this.$initialize();Kernel.Ajax.ctor.call(this);this.Url="/Admin/SetKeywordForSearch";this.Method="GET"}}});Bridge.define("Kernel.AjaxTask",{inherits:[Kernel.Ajax],fields:{requestError:!1,TimeCanWait:0,AjaxResult:null},ctors:{ctor:function(){this.$initialize();Kernel.Ajax.ctor.call(this);this.Async=!0;this.success=Bridge.fn.cacheBind(this,this._sucessTask);this.error=Bridge.fn.cacheBind(this,this._errorTask)}},methods:{Execute:function(){var $step=0,$task1,$taskResult1,$tcs=new System.Threading.Tasks.TaskCompletionSource,Ajax,$async_e,$asyncBody=Bridge.fn.bind(this,function(){try{for(;;){$step=System.Array.min([0,1],$step);switch($step){case 0:this.PrepareAjaxOptions();Ajax=System.Threading.Tasks.Task.fromPromise(jQuery.ajax({data:this.data,async:this.Async,method:this.Method,url:this.Url,success:Bridge.fn.cacheBind(this,this._sucessTask),error:Bridge.fn.cacheBind(this,this._errorTask)}));$task1=System.Threading.Tasks.Task.whenAll(Ajax);$step=1;$task1.continueWith($asyncBody);return;case 1:$taskResult1=$task1.getAwaitedResult();$tcs.setResult(this.AjaxResult);return;default:$tcs.setResult(null);return}}}catch($async_e1){$async_e=System.Exception.create($async_e1);$tcs.setException($async_e)}},arguments);return $asyncBody(),$tcs.task},_errorTask:function(){this.requestError=!0},_sucessTask:function(data){this.requestError=!1;this.AjaxResult=data}}});Bridge.define("Kernel.Browser.Dialog",{inherits:[Kernel.Browser.Data],fields:{dialogId:null,Title:null},ctors:{ctor:function(_dialogId){_dialogId===void 0&&(_dialogId="");this.$initialize();Kernel.Browser.Data.ctor.call(this);System.String.isNullOrWhiteSpace(_dialogId)||(this.dialogId=_dialogId,this.CreateModalDialog(_dialogId))}},methods:{CreateModalDialog:function(CreateddialogId){CreateddialogId===void 0&&(CreateddialogId="");System.String.isNullOrWhiteSpace(CreateddialogId)?(this.FillDialogData(),this.select(Kernel.SelectorExtensions.Id(this.dialogId)).modal("show")):this.select(Kernel.SelectorExtensions.Id(CreateddialogId)).modal("show")},HideModalDialog:function(dialogId){dialogId===void 0&&(dialogId="");System.String.isNullOrWhiteSpace(dialogId)?this.select(Kernel.SelectorExtensions.Id(this.dialogId)).modal("hide"):this.select(Kernel.SelectorExtensions.Id(dialogId)).modal("hide")},FillDialogData:function(){},GetChildId:function(Name){return System.String.format("{0}_{1}",this.dialogId,Name)},GetChild:function(Name){return this.select(Kernel.SelectorExtensions.Id(this.GetChildId(Name)))},SetTitle:function(Title){this.GetChild("DialogTitle").html(Title)}}});Bridge.define("Kernel.KendoDatePickerEventHandler",{inherits:[Kernel.KendoDatePicker],ctors:{ctor:function(Id){this.$initialize();Kernel.KendoDatePicker.ctor.call(this,Id);var object=document.getElementById(this._kendoDatePickerId);object.onchange=Bridge.fn.combine(object.onchange,Bridge.fn.cacheBind(this,this.onChange));object.onclick=Bridge.fn.combine(object.onclick,Bridge.fn.cacheBind(this,this.onClick));object.onmouseenter=Bridge.fn.combine(object.onmouseenter,Bridge.fn.cacheBind(this,this.onHover))}},methods:{onChange:function(){},onClick:function(){},onHover:function(){}}});Bridge.define("Kernel.Function",{inherits:[Kernel.Others.IVoid],fields:{data:null},alias:["Execute","Kernel$Others$IVoid$Execute"],ctors:{ctor:function(){this.$initialize();this.data=new Kernel.Browser.Data}},methods:{Execute:function(){},VariablesInit:function(){}}});Bridge.define("Modules.StaffManager.StaffManager_class",{inherits:[Kernel.Class],fields:{SetSearchKeyword_func:null,AddEventHandler_func:null},ctors:{ctor:function(){this.$initialize();Kernel.Class.ctor.call(this);this.SetSearchKeyword_func=new Modules.StaffManager.Functions.SetSearchKeyword;this.AddEventHandler_func=new Modules.StaffManager.Functions.AddEventHandler}}});Bridge.define("Kernel.DatePicker",{inherits:[Kernel.KendoDatePickerEventHandler],ctors:{ctor:function(){this.$initialize();Kernel.KendoDatePickerEventHandler.ctor.call(this,"datepicker")}},methods:{onChange:function(){this.this.SetToday()},onClick:function(){},onHover:function(){}}});Bridge.define("Kernel.Dependecies.EnsureLibrariesInstalledCorrectly_func",{inherits:[Kernel.Function],fields:{dependencies:null},alias:["Execute","Kernel$Others$IVoid$Execute"],ctors:{ctor:function(){this.$initialize();Kernel.Function.ctor.call(this);this.PrepareDependenciesList()}},methods:{PrepareDependenciesList:function(){this.dependencies=function(_o1){return _o1.add("jquery.jQuery"),_o1}(new(System.Collections.Generic.List$1(System.String).ctor))},Success:function(lib){System.Console.WriteLine(System.String.format("- <p style='color:green;'> {0} đã ok <\/p>",[lib]))},Error:function(lib){System.Console.WriteLine(System.String.format(" <p style='color:red;'>Chưa thêm thư viện {0} vào dự án<\/p>",[lib]))},CheckifLibraryInstalled:function(lib){try{var x=Bridge.unbox(lib),k=x.isPrototypeOf(undefined);return Bridge.fn.cacheBind(this,this.Success)}catch($e1){return $e1=System.Exception.create($e1),Bridge.fn.cacheBind(this,this.Error)}},Execute:function(){var $t,lib;$t=Bridge.getEnumerator(this.dependencies);try{while($t.moveNext())lib=$t.Current,System.Console.Write(System.String.format("Kiểm tra thư viện {0} tồn tại?",[lib])),this.CheckifLibraryInstalled(lib)(lib)}finally{Bridge.is($t,System.IDisposable)&&$t.System$IDisposable$Dispose()}}}});Bridge.define("Modules.StaffManager.EditStaffDialog_class",{inherits:[Kernel.Browser.Dialog],fields:{model:null},ctors:{ctor:function(){this.$initialize();Kernel.Browser.Dialog.ctor.call(this);this.dialogId="editOrCreateStaff"}},methods:{CreateModalDialog:function(CreateddialogId){CreateddialogId===void 0&&(CreateddialogId="");this.model==null&&alert("Chưa điền thông tin vào model");Kernel.Browser.Dialog.prototype.CreateModalDialog.call(this,CreateddialogId)},FillDialogData:function(){this.setValue(Kernel.SelectorExtensions.Id(this.GetChildId("name")),this.model.Name);this.setValue(Kernel.SelectorExtensions.Id(this.GetChildId("position")),this.model.Position);this.setValue(Kernel.SelectorExtensions.Id(this.GetChildId("email")),this.model.Email)},SetAction:function(Action){this.GetChild("dialogAction").html(Action)},AddEventHandler:function(){this.GetChild("dialogAction").on("click",Bridge.unbox(this.dialogAction_onClick))},dialogAction_onClick:function(){alert("work")}}});Bridge.define("Modules.StaffManager.Functions.AddEventHandler",{inherits:[Kernel.Function],fields:{_data:null,ajax:null,btnSearch:null},alias:["Execute","Kernel$Others$IVoid$Execute"],ctors:{ctor:function(){this.$initialize();Kernel.Function.ctor.call(this);this._data=new Kernel.Browser.Data}},methods:{Execute:function(){this.VariablesInit();this.SetEventHandler()},VariablesInit:function(){this.btnSearch=this._data.getElementById(HTMLButtonElement,"btnSearch")},SetEventHandler:function(){this.btnSearch.onclick=Bridge.fn.combine(this.btnSearch.onclick,Bridge.fn.cacheBind(this,this.btnSearchOnClick))},btnSearchOnClick:function(){System.Console.Write("Sự kiện btnSearch Click");(new Modules.StaffManager.Functions.SetSearchKeyword).Execute()}}});Bridge.define("Modules.StaffManager.Functions.SetSearchKeyword",{inherits:[Kernel.Function],fields:{ajax:null,keyword:null},alias:["Execute","Kernel$Others$IVoid$Execute"],ctors:{ctor:function(){this.$initialize();Kernel.Function.ctor.call(this)}},methods:{VariablesInit:function(){this.keyword=this.data.getValueById(System.String,"Email")},Execute:function(){this.VariablesInit();this.ajaxRequest()},ajaxRequest:function(){var $t;this.ajax=($t=new Ajax.Admin.SetKeywordForSearch,$t.Async=!0,$t.data={keyword:this.keyword},$t);this.ajax.success=Bridge.fn.cacheBind(this,this.setSearchKeyword_ok);this.ajax.error=Bridge.fn.cacheBind(this,this.setSearchKeyword_error);this.ajax.Request()},setSearchKeyword_error:function(){alert("Bị lỗi rồi")},setSearchKeyword_ok:function(){var KendoGrid=this.data.getKendoGrid("grid");this.data.kendGridReloadData(KendoGrid)}}});Bridge.define("Modules.StaffManager.Functions.ShowDialogEditStaffById",{inherits:[Kernel.Function],fields:{ajax:null,Id:0},alias:["Execute","Kernel$Others$IVoid$Execute"],ctors:{ctor:function(Id){this.$initialize();Kernel.Function.ctor.call(this);this.Id=Id}},methods:{Execute:function(){this.ajaxRequest()},ajaxRequest:function(){var $t,$t1;this.ajax=($t=new Ajax.Admin.GetStaffById,$t.Async=!0,$t.data=($t1=new Model.Common.Identifier,$t1.Id=this.Id,$t1),$t);this.ajax.success=Bridge.fn.cacheBind(this,this.data_ok);this.ajax.error=Bridge.fn.cacheBind(this,this.data_eror);this.ajax.Request()},data_eror:function(){},data_ok:function(data){var model=Bridge.unbox(data),editDialog=new Modules.StaffManager.EditStaffDialog_class;editDialog.model=model;editDialog.SetTitle("Cập nhật thông tin nhân viên");editDialog.SetAction(Modules.StaffManager.Functions.Consts.dialogActionEdit);editDialog.CreateModalDialog()}}});Bridge.define("Modules.StaffManager.Startup",{inherits:[Kernel.Function],alias:["Execute","Kernel$Others$IVoid$Execute"],ctors:{ctor:function(){this.$initialize();Kernel.Function.ctor.call(this)}},methods:{Execute:function(){try{var StaffManager_class=new Modules.StaffManager.StaffManager_class;StaffManager_class.AddEventHandler_func.Execute();System.Console.WriteLine("Module StaffManger đã khởi động")}catch($e1){$e1=System.Exception.create($e1);System.Console.Write("Lỗi xảy ra khi khởi động StaffManager")}}}});Bridge.define("Kernel.Dependecies.DI",{inherits:[Kernel.Dependecies.EnsureLibrariesInstalledCorrectly_func],methods:{PrepareDependenciesList:function(){Kernel.Dependecies.EnsureLibrariesInstalledCorrectly_func.prototype.PrepareDependenciesList.call(this);this.dependencies.add("TestLib2")},Error:function(lib){System.Console.WriteLine((System.String.format("Kiểu thông báo lỗi thứ 2 : Lỗi ",null)||"")+(lib||""))},Success:function(lib){System.Console.WriteLine(System.String.format("Ờ chạy được rồi nhé : {0}",[lib]))}}})});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAiZmlsZSI6ICJlU01TLm1pbi5qcyIsCiAgInNvdXJjZVJvb3QiOiAiIiwKICAic291cmNlcyI6IFtdLAogICJuYW1lcyI6IFtdLAogICJtYXBwaW5ncyI6ICIiLAogICJzb3VyY2VzQ29udGVudCI6IFtdCn0K
